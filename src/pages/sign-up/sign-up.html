<ion-content padding>
  <div class="login-form-container">
    <form id="signup-form" class="login-form" [formGroup]="signupForm" autocomplete="off" (keydown)="keyDownFunction($event)"
      novalidate>
      <div class="login-line">
        <ion-item>
          <ion-label floating>{{'SIGNUP.FORM.EMAIL' | translate }}</ion-label>
          <ion-input id="email" formControlName="email" type="text" name="email" validateEmail></ion-input>
        </ion-item>
        <em *ngIf="isEmailInvalid()">{{ 'SIGNUP.FORM.EMAIL_INVALID' | translate }}</em>
        <em *ngIf="isEmailEmpty()">{{ 'FORM.REQUIRED' | translate }}</em>
        <em *ngIf="isEmailTaken()">{{ 'SIGNUP.FORM.EMAIL_TAKEN' | translate }}</em>
      </div>
      <div class="form-group" [formGroup]="passwordGroup" validateConfirmPassword>
        <div class="login-line">
          <ion-item>
            <ion-label floating>{{'SIGNUP.FORM.PASSWORD' | translate }}</ion-label>
            <ion-input id="password" formControlName="password" type="password" name="password" validatePassword></ion-input>
          </ion-item>
          <em *ngIf="isPasswordStrongEnough()">{{ 'SIGNUP.FORM.PASSWORD_NOT_STRONG' | translate }}</em>
        </div>
        <div class="login-line">
          <ion-item>
            <ion-label floating>{{'SIGNUP.FORM.CONFIRM_PASSWORD' | translate }}</ion-label>
            <ion-input id="confirmPassword" formControlName="confirmPassword" type="password" name="confirmPassword"></ion-input>
          </ion-item>
          <em *ngIf="isConfirmPasswordInvalid()">{{ 'SIGNUP.FORM.CONFIRM_PASSWORD_INVALID' | translate }}</em>
        </div>
      </div>
      <div class="login-line">
        <ion-item>
          <ion-label floating>{{'SIGNUP.FORM.USERNAME' | translate }}</ion-label>
          <ion-input id="username" formControlName="username" type="text" name="username" validateUsername></ion-input>
        </ion-item>
        <em *ngIf="isUsernameEmpty()">{{ 'FORM.REQUIRED' | translate }}</em>
        <em *ngIf="isUsernameTaken()">{{ 'SIGNUP.FORM.USERNAME_TAKEN' | translate }}</em>
      </div>
      <div class="login-line">
        <ion-item>
          <ion-label floating>{{'SIGNUP.FORM.FIRST_NAME' | translate }}</ion-label>
          <ion-input id="firstName" formControlName="firstName" type="text" name="firstName"></ion-input>
        </ion-item>
      </div>
      <div class="login-line">
        <ion-item>
          <ion-label floating>{{'SIGNUP.FORM.LAST_NAME' | translate }}</ion-label>
          <ion-input id="lastName" formControlName="lastName" type="text" name="lastName"></ion-input>
        </ion-item>
      </div>
      <div class="login-line login-error" *ngIf="backendError">{{ backendError | translate }}</div>
    </form>
    <div class="login-line button-line" *ngIf="!showSpinner">
      <button ion-button (click)="signup(signupForm.value)">{{ 'FORM.OK' | translate }}</button>
      <button ion-button class="button-right" (click)="cancel()">{{ 'FORM.CANCEL' | translate }}</button>
    </div>
  </div>
</ion-content>